---
// Global image protection script
---

<script>
  // Disable right-click context menu on images
  document.addEventListener('contextmenu', function(e) {
    if (e.target && (e.target as HTMLElement).tagName === 'IMG') {
      e.preventDefault();
      return false;
    }
  });

  // Disable drag and drop for images
  document.addEventListener('dragstart', function(e) {
    if (e.target && (e.target as HTMLElement).tagName === 'IMG') {
      e.preventDefault();
      return false;
    }
  });

  // Disable common keyboard shortcuts for saving images
  document.addEventListener('keydown', function(e) {
    // Disable Ctrl+S (Save)
    if (e.ctrlKey && e.key === 's') {
      e.preventDefault();
      return false;
    }
    
    // Disable F12 (Developer Tools)
    if (e.key === 'F12') {
      e.preventDefault();
      return false;
    }
    
    // Disable Ctrl+Shift+I (Developer Tools)
    if (e.ctrlKey && e.shiftKey && e.key === 'I') {
      e.preventDefault();
      return false;
    }
    
    // Disable Ctrl+U (View Source)
    if (e.ctrlKey && e.key === 'u') {
      e.preventDefault();
      return false;
    }
  });

  // Disable text selection on images
  document.addEventListener('selectstart', function(e) {
    if (e.target && (e.target as HTMLElement).tagName === 'IMG') {
      e.preventDefault();
      return false;
    }
  });

  // Add protection to all existing images
  function protectImages() {
    const images = document.querySelectorAll('img');
    images.forEach(img => {
      img.style.userSelect = 'none';
      (img.style as any).webkitUserSelect = 'none';
      (img.style as any).mozUserSelect = 'none';
      (img.style as any).msUserSelect = 'none';
      img.draggable = false;
      img.oncontextmenu = function() { return false; };
    });
  }

  // Run protection on page load
  document.addEventListener('DOMContentLoaded', protectImages);
  
  // Re-run protection when new content is loaded (for Astro transitions)
  document.addEventListener('astro:page-load', protectImages);
</script>

<style>
  /* Disable image selection and dragging globally */
  img {
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    -webkit-user-drag: none !important;
    -khtml-user-drag: none !important;
    -moz-user-drag: none !important;
    -o-user-drag: none !important;
    user-drag: none !important;
    pointer-events: none !important;
  }

  /* Allow pointer events on image containers for links */
  a img {
    pointer-events: auto !important;
  }

  /* Disable text selection on image containers */
  .image-container {
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
  }
</style>
